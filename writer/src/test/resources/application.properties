### Local server
server.port=${SERVER_PORT:8999}

### Compression
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024

# Actuator
management.endpoints.enabled-by-default=false
management.endpoint.health.enabled=true

### Security
security.cors.allowedOrigins=${SECURITY_ALLOWED_ORIGINS:*}
keycloak.auth-server-url=${KEYCLOAK_URL:https://auth.opendatahub.testingmachine.eu/auth}
keycloak.ssl-required=${KEYCLOAK_SSL_REQUIRED:none}
keycloak.realm=${KEYCLOAK_REALM:noi}
keycloak.resource=${KEYCLOAK_CLIENT_ID:odh-mobility-writer-development}
keycloak.use-resource-role-mappings=true
keycloak.public-client=false
keycloak.bearer-only=true
keycloak.securityConstraints[0].authRoles[0]=ROLE_ADMIN
keycloak.securityConstraints[0].securityCollections[0].patterns[0]=/json/*

### Database (see persistence.xml for details; .properties values override .xml values)
# The default is set to the docker postgres connection (see docker-compose.yml)
hibernate.hikari.dataSource.serverName=${POSTGRES_SERVER:localhost}
hibernate.hikari.dataSource.portNumber=${POSTGRES_PORT:5555}
hibernate.hikari.dataSource.databaseName=${POSTGRES_DB:bdp}
hibernate.default_schema=${POSTGRES_SCHEMA:intimev2}
hibernate.hikari.dataSource.user=${POSTGRES_USERNAME:bdp}
hibernate.hikari.dataSource.password=${POSTGRES_PASSWORD:password}
hibernate.hikari.maximumPoolSize=${HIBERNATE_MAX_POOL_SIZE:2}

# FIXME: These values should be used, not hibernate.* (remove also persistence.xml)
# Needed only for flyway for now
spring.datasource.url=jdbc:postgresql://${POSTGRES_SERVER:localhost}:${POSTGRES_PORT:5555}/${POSTGRES_DB:bdp}?currentSchema=${POSTGRES_SCHEMA:intimev2},public
spring.datasource.username=${POSTGRES_USERNAME:bdp}
spring.datasource.password=${POSTGRES_PASSWORD:password}
spring.jpa.hibernate.ddl-auto=none
spring.jpa.hibernate.naming.implicit-strategy=it.bz.idm.bdp.dal.util.SchemaGeneratorImplicitNamingStrategy
spring.jpa.properties.hibernate.format_sql=${HIBERNATE_SQL_LOG:false}
spring.jpa.properties.hibernate.dialect=it.bz.idm.bdp.dal.util.PostgisJsonDialect

# Database migrations
spring.flyway.enabled=false
spring.flyway.placeholders.default_schema=intimev2

### Database ORM logging
# Enable SQL output while logging
hibernate.show_sql=${HIBERNATE_SQL_LOG:false}
# Enable logging for hibernate
logging.level.org.hibernate.SQL=INFO
# Enable logging for HikariCP to verify that it is used
logging.level.com.zaxxer.hikari.HikariConfig=INFO
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=INFO

# Solving issue: Disabling contextual LOB creation as createClob() method threw error
hibernate.temp.use_jdbc_metadata_defaults=false
hibernate.types.print.banner = false
